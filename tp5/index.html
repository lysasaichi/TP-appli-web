<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="js/libs/vue.js"></script>
        <script src="js/main.js"></script>
        <link rel="apple-touch-icon" href="apple-touch-icon.png">
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/weather-icons.min.css">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <!-- Place favicon.ico in the root directory -->
        <title>TP5.WebApp.M√©teo</title>
     
    </head>
    <body>  
        <div class="container" > 
            <div class="col offset-md-3 col-md-9"> 
        <p class="titre">  WebApp M√©teo VUEjs üå¶Ô∏è</p></br>  
        <h4>Veuillez saisir le nom de la ville </h4></br>
        
        <div id="weatherApp">
           
            <!-- ici votre code HTML utilis√© par VUE -->
            <!-- formulaire de saisie de ville -->
<form id="mainForm" v-on:submit="addCity">
    <div class="input-group">
        <input type="search" class="form-control" v-model="formCityName" placeholder="Chercher..." aria-label="Search for..." autofocus required>
        <span class="input-group-btn">
            <button class="btn btn-primary" type="submit">Go!</button>
        </span>
    </div>
</form>
<!-- fin: formulaire de saisie de ville -->
    <!-- affichage de nombre de caract√®res saisie -->
<small class="text-muted">
        {{formCityName.length}} car.
 </small>

    <div class="alert alert-danger" role="alert" v-if='messageForm != ""'>
        {{messageForm}}
    </div>                
 
<!-- Listing des villes, boucle sur l'array : cityList -->
<h4>Liste des villes ({{cityList.length}})</h4>
<ul class="list-group">
    <a v-for="city in cityList" v-on:click="meteo(city)" class="list-group-item d-flex justify-content-between align-items-center">
        {{city.name}}
        <button v-on:click="remove(city)" class="btn btn-secondary btn-sm" title="Supprimer de la liste">&times;</button>
    </a>
</ul>

<div class="alert alert-primary" role="alert" v-if="cityList.length==0">
    Aucune ville de saisie!
</div>

<!-- fin : Listing des villes -->
<p></p>
<!-- meteo de la ville selectionn√©e -->
<div v-if="cityWeatherLoading" class="alert alert-info mt-4"> Chargement de la m√©t√©o...</div>

<div v-if="cityWeather">
    <div class="col offset-md-2 col-md-6">
    

    <div class="card" style="width: 18rem;" v-if="cityWeather">
        <div class="card-header">
            {{cityWeather.name}} 
        </div>
        <img class="card-img-top" v-bind:src="'https://maps.googleapis.com/maps/api/staticmap?markers='+LATITTUDE+','+LONGITUDE+'&zoom=5&size=400x300&scale=2&key=AIzaSyAkmvI9DazzG9p77IShsz_Di7-5Qn7zkcg'" alt="Card image cap">

        <div class="card-body">
            <h5 class="card-title">
                <i v-bind:class="'wi wi-owm-day-'+cityWeather.weather[0].id"></i>
                {{cityWeather.main.temp}}<i class="wi wi-celsius"></i>                            
            </h5>
            <p class="card-text">{{cityWeather.weather[0].description}}</p>
        </div>
        <ul class="list-group list-group-flush">
            <li class="list-group-item">
                <i class="wi wi-cloud"></i> Nuage: {{cityWeather.clouds.all}}%                            
            </li>
            <li class="list-group-item">
                <i class="wi wi-humidity"></i> Humidit√©: {{cityWeather.main.humidity}}%                           
            </li>
            <li class="list-group-item">
                <i class="wi wi-windy"></i> Vent: {{cityWeather.wind.speed}} km/h
            </li>
            <li class="list-group-item">
                <i class="wi wi-sunrise"></i> 
                Lev√© du soleil:  {{new Date(cityWeather.sys.sunrise * 1000).toTimeString()}}
            </li>
            <li class="list-group-item">
                <i class="wi wi-sunset"></i>
                Couch√© du soleil: {{new Date(cityWeather.sys.sunset * 1000).toTimeString()}}
            </li>
          </ul>        
         </div>
       </div>
     </div>

   </div>
  </div> 
  <p></p>

</div>    
    </body>
</html>
